<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>华南农业大学单片机协会第三方用户注册页面</title>
</head>
<body>
    <h2>第三方用户信息</h2>
    <img alt="图片加载ing..." class="social-usr" id="avatar" style="width: 66px; height: 66px;">
    <p class="social-usr" id="nickname"></p>
    <p class="social-usr" id="provider-id"></p>

    <h2>创建新账户</h2>
    <form action="/usr/social-signup/1" method="post">
        <table>
            <tr>
                <td>用户名:</td>
                <td><input type="text" name="username"></td>
            </tr>
            <tr>
                <td>手机号:</td>
                <td><input type="text" name="mobile"></td>
            </tr>
            <tr>
                <td>邮箱号:</td>
                <td><input type="text" name="email"></td>
            </tr>
            <tr>
                <td>密码:</td>
                <td><input type="password" name="password"></td>
            </tr>
            <tr>
                <td colspan="2"><button type="submit">注册</button></td>
            </tr>
        </table>
    </form>

    <h2>已有账户,进行绑定</h2>
    <form action="/usr/social-signup/2" method="post">
        <table>
            <tr>
                <td>用户名:</td>
                <td><input type="text" name="username"/></td>
            </tr>
            <tr>
                <td>密码:</td>
                <td><input type="password" name="password"/></td>
            </tr>
            <tr>
                <td>图形验证码:</td>
                <td>
                    <input type="text" name="imageCode"/>
                    <img alt="加载中..." src="/code/image?width=200">
                </td>
            </tr>
            <tr>
                <td colspan="2"><button type="submit">绑定</button></td>
            </tr>
        </table>
    </form>

    <script type="text/javascript" src="../js/jquery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        function getSocialInfo() {
            $.ajax({
                url : '/usr/social-info',
                type : 'GET',
                success : function (result, status) {
                    console.info(result);
                    console.info(status);
                    $("img#avatar.social-usr").attr("src", result.socialAvatar);
                    $("p#nickname.social-usr").text(result.socialNickname);
                    $("p#provider-id.social-usr").text(result.providerId);
                },
                error : function (xhr, e1, e2) {
                    console.error("出错");
                }
            });
        }

        $(function () {

            getSocialInfo();

        });
    </script>

</body>
</html>